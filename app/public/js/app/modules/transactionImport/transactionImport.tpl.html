<h2>Import Transactions</h2>
<form>
    <div id="csvSelection">
        <h3>Type of CSV:</h3>
        <select ng-model="transactionImportCtrl.selectedFileType"
                ng-options="fileType.name for fileType in transactionImportCtrl.fileTypes"></select>
    </div>

    <div id="fileSelection" ng-show="transactionImportCtrl.selectedFileType">
        <h3>Select a file:</h3>

        <div file-input="transactionImportCtrl.currentFile"
             on-change="transactionImportCtrl.readInput()"></div>
    </div>

    <div id="accountSelection" ng-show="transactionImportCtrl.hasAccounts()">
        <h3>Account</h3>
        <select ng-model="transactionImportCtrl.selectedAccount"
                ng-options="account.name for account in transactionImportCtrl.currentFileContent.accounts"></select>
    </div>

    <div id="accountTransactions" ng-show="transactionImportCtrl.hasTransactions()">
        <h3>Transactions</h3>
        <table>
            <tr>
                <th>Description</th>
                <th>Date</th>
                <th>Post Date</th>
                <th>Amount</th>
                <th>Type</th>
                <th>Notes</th>
            </tr>

        <tr ng-repeat="transaction in transactionImportCtrl.getCurrentAccountTransactions()">
            <td>{{transaction.description}}</td>
            <td>{{transaction.transactionDate | date:"MM/dd/yyyy" }}</td>
            <td>{{transaction.transactionPostDate | date:"MM/dd/yyyy" }}</td>
            <td>{{transaction.amount | currency}}</td>
            <td>{{transaction.transactionType}}</td>
            <td>{{transaction.notes}}</td>
        </tr>
        </table>
    </div>

    <div id="applyToAccountSelection" ng-show="transactionImportCtrl.hasTransactions()">
        <h3>Apply to account:</h3>
        <select ng-model="transactionImportCtrl.selectedBankAccount"
                ng-options="account.description for account in transactionImportCtrl.bankAccounts"></select>
    </div>

    <button ng-show="transactionImportCtrl.selectedBankAccount" ng-click="transactionImportCtrl.saveToAccount()">Save to Account</button>
</form>